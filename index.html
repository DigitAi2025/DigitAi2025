<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>DigitAI - Fix Partículas</title>
  <style>
    *{box-sizing:border-box;margin:0;padding:0}
    html,body{height:100%;}
    body{
      font-family: Arial, sans-serif;
      background: linear-gradient(180deg,#05060a,#020204);
      color:#e9eef0;
      overflow-y:auto;
      -webkit-font-smoothing:antialiased;
      -moz-osx-font-smoothing:grayscale;
    }

    /* CANVAS PARTICULAS: detrás, sin interceptar eventos */
    #particles{
      position:fixed;
      inset:0;
      width:100%;
      height:100%;
      z-index:0;
      pointer-events:none;
    }

    /* CONTENIDO encima del canvas */
    .site {
      position:relative;
      z-index:2;
      max-width:1100px;
      margin:0 auto;
      padding:40px 20px 160px;
    }

    header{
      display:flex;
      flex-direction:column;
      gap:8px;
      align-items:center;
      text-align:center;
      padding:80px 10px;
      background: rgba(255,255,255,0.02);
      border-radius:12px;
      margin-top:24px;
    }
    h1{font-size:52px;color:#8af2df;text-shadow:0 0 30px rgba(138,242,223,0.08);}
    p.lead{font-size:18px;color:#cfeee9;opacity:0.95;}

    section{
      margin-top:30px;
      background: rgba(10,15,20,0.55);
      padding:28px;
      border-radius:12px;
      border:1px solid rgba(0,255,200,0.06);
      box-shadow:0 8px 30px rgba(0,0,0,0.6);
    }
    h2{color:#00e0c0;margin-bottom:12px}
    p{line-height:1.7;color:#dceff0}

    footer{margin-top:48px;text-align:center;color:#9aa8a6;padding:30px 0}

    @media (max-width:600px){
      h1{font-size:34px}
      header{padding:40px 10px}
    }
  </style>
</head>
<body>

<canvas id="particles"></canvas>

<div class="site">
  <header>
    <h1>DigitAI</h1>
    <p class="lead">Impulsá tu presencia digital con estilo — ahora con partículas reactivas y contenido visible.</p>
  </header>

  <section>
    <h2>¿Por qué trabajar tu presencia en redes?</h2>
    <p>Tu imagen digital define cómo te ve tu audiencia y abre puertas a nuevas oportunidades.
       Una estrategia bien ejecutada puede transformar tu marca o emprendimiento.</p>
  </section>

  <section>
    <h2>Funcionamiento de las partículas</h2>
    <p>Las partículas están renderizadas en un canvas independiente que queda detrás del contenido (z-index:0).
       El contenido (.site) tiene un z-index superior para garantizar que todo el texto sea legible y clicable.
       El canvas además tiene <code>pointer-events:none</code> para que no bloquee interacciones.</p>
  </section>

  <footer>DigitAI © 2025 — Presencia digital inteligente.</footer>
</div>

<script>
/* PARTICULAS REACTIVAS - versión estable y compatible
   - canvas detrás del contenido (z-index 0) y pointer-events:none
   - muchas partículas (configurable)
   - parallax vertical por scroll (suave y estático visualmente)
   - parallax horizontal por mouse (sutil)
   - wrapping correcto (evita valores negativos)
*/

const canvas = document.getElementById('particles');
const ctx = canvas.getContext('2d');

let DPR = Math.min(window.devicePixelRatio || 1, 2);

function resize(){
  DPR = Math.min(window.devicePixelRatio || 1, 2);
  canvas.width = Math.floor(window.innerWidth * DPR);
  canvas.height = Math.floor(window.innerHeight * DPR);
  canvas.style.width = window.innerWidth + 'px';
  canvas.style.height = window.innerHeight + 'px';
}
window.addEventListener('resize', resize);
resize();

const PARTICLE_COUNT = 500; // más partículas
const particles = [];

function rand(min,max){ return Math.random() * (max - min) + min; }

function create(){
  particles.length = 0;
  for(let i=0;i<PARTICLE_COUNT;i++){
    particles.push({
      x: rand(0, window.innerWidth),
      y: rand(0, window.innerHeight),
      z: rand(0.2, 1.0),
      size: rand(0.8, 3.2),
      alpha: rand(0.15, 0.9),
      vx: rand(-0.02,0.02),
      vy: rand(-0.02,0.02)
    });
  }
}
create();

let scrollY = 0;
let targetScrollY = 0;
let mouseX = 0;
let mouseY = 0;

window.addEventListener('scroll', () => { targetScrollY = window.scrollY || window.pageYOffset; });
window.addEventListener('mousemove', e => {
  mouseX = (e.clientX - window.innerWidth/2) / (window.innerWidth/2);
  mouseY = (e.clientY - window.innerHeight/2) / (window.innerHeight/2);
});

// utils to wrap positive modulo
function posMod(n, m){ return ((n % m) + m) % m; }

function draw(){
  ctx.clearRect(0,0,canvas.width, canvas.height);

  // smooth camera scroll lerp
  scrollY += (targetScrollY - scrollY) * 0.12;

  const cx = canvas.width / 2;
  const cy = canvas.height / 2 + scrollY * DPR * -0.04; // small vertical camera shift

  for(let i=0;i<particles.length;i++){
    const p = particles[i];

    // subtle autonomous movement
    p.x += p.vx * (1 + (1 - p.z) * 0.5);
    p.y += p.vy * (1 + (1 - p.z) * 0.5);

    // wrap around screen bounds (using window size, not canvas pixels)
    if(p.x < -50) p.x = window.innerWidth + 50;
    if(p.x > window.innerWidth + 50) p.x = -50;
    if(p.y < -50) p.y = window.innerHeight + 50;
    if(p.y > window.innerHeight + 50) p.y = -50;

    // parallax effect: closer particles move more with scroll and mouse
    const parallaxFactor = (1 - p.z); // 0..0.8
    const sx = (p.x - window.innerWidth/2) * (0.5 + 0.8 * p.z) + cx + mouseX * 80 * parallaxFactor * DPR;
    const syRaw = p.y - window.innerHeight/2;
    const syScrolled = syRaw + scrollY * 0.12 * (1 + parallaxFactor);
    // wrap syScrolled into 0..canvas.height to avoid overflow
    const sy = posMod(syScrolled + canvas.height/2, canvas.height);

    const sz = p.size * (1.6 - p.z) * DPR;

    // soft glow
    const grad = ctx.createRadialGradient(sx, sy, 0, sx, sy, sz * 6);
    grad.addColorStop(0, `rgba(120,220,200,${p.alpha})`);
    grad.addColorStop(0.4, `rgba(80,170,200,${p.alpha*0.45})`);
    grad.addColorStop(1, 'rgba(0,0,0,0)');

    ctx.fillStyle = grad;
    ctx.fillRect(sx - sz*6, sy - sz*6, sz*12, sz*12);

    // core
    ctx.beginPath();
    ctx.fillStyle = `rgba(200,255,245,${p.alpha})`;
    ctx.arc(sx, sy, Math.max(0.6, sz*0.6), 0, Math.PI*2);
    ctx.fill();
  }

  requestAnimationFrame(draw);
}

draw();

// recreate particles sensibly on resize or DPR change
let rt;
window.addEventListener('resize', ()=>{ clearTimeout(rt); rt = setTimeout(()=>{ create(); resize(); }, 220); });
</script>

</body>
</html>
